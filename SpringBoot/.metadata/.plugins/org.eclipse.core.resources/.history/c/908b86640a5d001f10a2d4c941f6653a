package com.slokam;



import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

@Component
public class service
{	
	@Autowired
	private dao da;
	
	public void getAllASC()
	{
		System.out.println("getAllASC ops started in datasource");
		String query = " select * from spring_jdbc.employee order by ename asc ";
		try( Connection c = ds.getConnection(); PreparedStatement ps = c.prepareStatement(query);)
		{
			ResultSet rs = ps.executeQuery();
			boolean isNotNull = rs.next();
			if(!isNotNull)
				System.out.println("No persons in the data base");
			while(isNotNull)
			{	
				empPojo e = new empPojo();
				e.setEid(rs.getInt(1));
				e.setEname(rs.getString(2));
				e.setEage(rs.getInt(3));
				e.setEsal(rs.getDouble(4));
				System.out.println(e);
				isNotNull = rs.next();
			}
			
		}
		catch(Exception e)
		{
			System.out.println("getAllASC method catch block executed ");
		}
		System.out.println("getAllASC ops ended in datasource");
	}
	
	public void getAll()
	{
		System.out.println("Get all ops started in datasource");
		da.getAll();
		System.out.println("Get all ops ended in datasource");
	}
	
	public void searchByLastLetter(String a )
	{
		System.out.println("Search by last letter service started");
		da.searchByLastLetter(a);
		System.out.println("Search by last letter service ended");
	}
	
	
	public void searchByFirstLetter(String a )
	{	
		System.out.println("searchByFirstLetter service started");
		da.searchByFirstLetter(a);
		System.out.println("searchByFirstLetter service ended");
	}
	
	public void searchByName(String ename)
	{
		System.out.println("service name search started");
		da.searchByName(ename);
		System.out.println("service name search completed");
	}
	
	public void save(empPojo e)
	{
		System.out.println("Service saving started");
		da.save(e);
		System.out.println("Service saving completed");
	}
	
	public void getById(int eid)
	{
		System.out.println("service getById started");
		da.getById(eid);
		System.out.println("service getById completed");
	}
}
